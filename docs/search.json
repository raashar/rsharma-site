[
  {
    "objectID": "walkthrough.html",
    "href": "walkthrough.html",
    "title": "Coding Sample",
    "section": "",
    "text": "We’ll start by loading our libraries.\n\n\nCode\nknitr::opts_chunk$set(echo = TRUE)\n\n#Load libraries \nlibrary(tidyverse) \n\n\n── Attaching core tidyverse packages ──────────────────────── tidyverse 2.0.0 ──\n✔ dplyr     1.1.0     ✔ readr     2.1.4\n✔ forcats   1.0.0     ✔ stringr   1.5.0\n✔ ggplot2   3.4.1     ✔ tibble    3.1.8\n✔ lubridate 1.9.2     ✔ tidyr     1.3.0\n✔ purrr     1.0.1     \n── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──\n✖ dplyr::filter() masks stats::filter()\n✖ dplyr::lag()    masks stats::lag()\nℹ Use the \u001b]8;;http://conflicted.r-lib.org/\u0007conflicted package\u001b]8;;\u0007 to force all conflicts to become errors\n\n\nCode\nlibrary(janitor) \n\n\n\nAttaching package: 'janitor'\n\nThe following objects are masked from 'package:stats':\n\n    chisq.test, fisher.test\n\n\nCode\nlibrary(readxl) \nlibrary(scales)\n\n\n\nAttaching package: 'scales'\n\nThe following object is masked from 'package:purrr':\n\n    discard\n\nThe following object is masked from 'package:readr':\n\n    col_factor\n\n\nCode\nlibrary(lubridate)\nlibrary(tidyverse)\nlibrary(tigris)\n\n\nTo enable caching of data, set `options(tigris_use_cache = TRUE)`\nin your R script or .Rprofile.\n\n\nCode\nlibrary(sf)\n\n\nLinking to GEOS 3.8.0, GDAL 3.0.4, PROJ 6.3.1; sf_use_s2() is TRUE\n\n\nCode\nlibrary(tmap)\nlibrary(tmaptools)\nlibrary(htmltools)\nlibrary(janitor)\nlibrary(rmapshaper)\nlibrary(here)\n\n\nhere() starts at /cloud/project\n\n\nCode\nlibrary(ggthemes)\noptions(tigris_class = \"sf\")\n\n\n\nIntroduction\nWe’ll be making a few charts and maps using the ggplot2 and tmap packages in R.\nThe data used for this assignment includes Georgia election results by county for U.S. Senate and Governor in 2022, President in 2020, and then some socioeconomic factors.\n\nLoading the Data\nThe first step is to load in the data, which is stored in the ga_votes.xlsx Excel file that’s included in this repository. As you’ll see if you open the spreadsheet itself, there are two tabs - one contains the senate results, and one contains the governor results.\nWe’ll load them separately into two datasets to be used for the remainder of this assignment.\n\n\nCode\n#import the GA election data for this assignment\n\n#GA senate\nsenate_results <- read_excel(here(\"ga_votes.xlsx\"), sheet = \"senate\")\n\n#GA governor\ngovernor_results <- read_excel(here(\"ga_votes.xlsx\"), sheet = \"governor\")\n\n\nTwo columns in particular to highlight that we’ll use to examine how the Republican Senate and Governor candidates did compared with former President Trump’s performance in 2020:\n\npct_r_above_trump. This column calculates the difference in percentage points between what the 2022 Republican candidate got (pct_r_2022) and what Trump got two years earlier (pct_r_2020). A negative value means the candidate did worse than Trump, a positive value means they did better.\nis_r_above_trump. This companion columns is a so-called “flag” column, which provides a Yes/No as to whether the Republican candidate did better or worse than Trump. In other words, is the pct_r_above_trump value positive or negative.\n\n\n\n\nCharts\nFor this section use the ggplot2 package to create your charts.\n1)\nFor the Senate race, we will create a column/bar chart that shows how many counties the Republican candidate did better vs. worse than Trump.\n\n\nCode\nsenate_results = senate_results %>%\n  mutate(\n    is_r_above_trump_new = ifelse(is_r_above_trump==\"Y\", \"Better\", \"Worse\")\n  )\n\nplot1 = ggplot(senate_results, aes(x = is_r_above_trump_new)) + \n  geom_bar(fill = \"#9ebcda\") +\n  xlab(\"Performance\") +\n  ylab(\"Number of counties\") +\n  labs(title = \"Republican senate candidate performance\\ncompared to Trump in GA counties\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot1\n\n\n\n\n\n2)\nNow we’ll do the same as Part 1, just this time for the race for Governor.\n\n\nCode\ngovernor_results = governor_results %>%\n  mutate(\n    is_r_above_trump_new = ifelse(is_r_above_trump==\"Y\", \"Better\", \"Worse\")\n  )\n\nplot2 = ggplot(governor_results, aes(x = is_r_above_trump_new)) + \n  geom_bar(fill = \"#9ebcda\") +\n  xlab(\"Performance\") +\n  ylab(\"Number of counties\") +\n  labs(title = \"Republican governor candidate performance\\ncompared to Trump in GA counties\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot2\n\n\n\n\n\n3)\nFor the Senate race, we’ll create a chart that shows the top 10 biggest drops between the Republican candidate and Trump (i.e. the 10 counties with the most substantial negative numbers in pct_r_above_trump). Remember that you can slice off a certain number of rows using the head() function, i.e. head(5), head(20), etc.\nThe chart should be sorted from the biggest drop to the smallest among the top 10 counties.\n\n\nCode\nsenate_drops = senate_results %>%\n  group_by(county) %>%\n  summarize(pct_r_above_trump = pct_r_above_trump) %>%\n  arrange(pct_r_above_trump) %>%\n  head(10)\n\nplot3 = senate_drops %>%\n  arrange(pct_r_above_trump) %>%\n  ggplot(aes(x = reorder(county, desc(pct_r_above_trump)), y = pct_r_above_trump)) + \n  geom_col(fill = \"#9ebcda\") +\n  coord_flip() + \n  xlab(\"Counties\") +\n  ylab(\"Percentage\") +\n  labs(title = \"Highest drops between Republican candidates\\nand Trump in GA counties (Top 10)\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot3\n\n\n\n\n\n4)\nFor the Senate race, we’ll create a chart that shows the top 10 counties highest margins of victory for the Democratic candidate. To do that we’ll need to compare the Democratic candidate’s percentage (pct_d_2022) with the Republican’s (pct_r_2022) to calculate the margin of victory for each county.\n\n\nCode\nsenate_results = senate_results %>%\n  mutate(\n    d_margin = pct_d_2022 - pct_r_2022\n  )\n\ndem_margin_s = senate_results %>%\n  group_by(county) %>%\n  summarize(d_margin = d_margin) %>%\n  arrange(desc(d_margin)) %>%\n  head(10)\n\nplot4 = dem_margin_s %>%\n  arrange(desc(d_margin)) %>%\n  ggplot(aes(x = reorder(county, d_margin), y = d_margin)) + \n  geom_col(fill = \"#9ebcda\") +\n  coord_flip() + \n  xlab(\"Counties\") +\n  ylab(\"Democratic margin of victory percentage\") +\n  labs(title = \"Highest Democratic margins of victory\\nfor senate race in GA counties (Top 10)\",\n       subtitle = \"2022\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot4\n\n\n\n\n\n5)\nNow do the same as Part 4, only this time for the race for Governor instead.\n\n\nCode\ngovernor_results = governor_results %>%\n  mutate(\n    d_margin = pct_d_2022 - pct_r_2022\n  )\n\ndem_margin_g = governor_results %>%\n  group_by(county) %>%\n  summarize(d_margin = d_margin) %>%\n  arrange(desc(d_margin)) %>%\n  head(10)\n\nplot5 = dem_margin_g %>%\n  arrange(desc(d_margin)) %>%\n  ggplot(aes(x = reorder(county, d_margin), y = d_margin)) + \n  geom_col(fill = \"#9ebcda\") +\n  coord_flip() + \n  xlab(\"Counties\") +\n  ylab(\"Democratic margin of victory percentage\") +\n  labs(title = \"Highest Democratic margins of victory\\nfor governor race in GA counties (Top 10)\",\n       subtitle = \"2022\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot5\n\n\n\n\n\n6)\nNow, we’ll determine the top 10 counties with the biggest differences between what the Republican candidate for Governor received and what the Senate candidate received.\n(Note that to accomplish this you’ll have to first run a join that merges the two datasets, so that you have both the senate and governor version of the pct_r_2022 column in the same table.)\n\n\nCode\n# .x are senate results; .y are governor results\nsen_gov_results = inner_join(senate_results, governor_results, by=c(\"county\"=\"county\"))\n\nsen_gov_results = sen_gov_results %>% \n  mutate(pct_r_diff = pct_r_2022.y - pct_r_2022.x)\n\nr_diff = sen_gov_results %>%\n  group_by(county) %>%\n  summarize(pct_r_diff = pct_r_diff) %>%\n  arrange(desc(pct_r_diff)) %>%\n  head(10)\n\nplot6 = r_diff %>%\n  arrange(desc(pct_r_diff)) %>%\n  ggplot(aes(x = reorder(county, pct_r_diff), y = pct_r_diff)) + \n  geom_col(fill = \"#9ebcda\") +\n  coord_flip() + \n  xlab(\"Counties\") +\n  ylab(\"Percent difference\") +\n  labs(title = \"Pct differences between Republican senate\\nand governor candidates in GA counties (Top 10)\",\n       subtitle = \"2022\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot6\n\n\n\n\n\n\n\nMaps\nFor this section we’ll use the tmap package to create your charts.\nTo help start things out, we’re going to download a geospatial/map dataset with the county boundaries for Georgia. We’ll use the tigris package to do this.\n\n\nCode\ncounties_geo <- tigris::counties(state = \"GA\", resolution = \"20m\", cb = TRUE)\n\n\nRetrieving data for the year 2021\n\n\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |=                                                                     |   2%\n  |                                                                            \n  |==                                                                    |   2%\n  |                                                                            \n  |==                                                                    |   3%\n  |                                                                            \n  |===                                                                   |   4%\n  |                                                                            \n  |===                                                                   |   5%\n  |                                                                            \n  |====                                                                  |   6%\n  |                                                                            \n  |=====                                                                 |   6%\n  |                                                                            \n  |=====                                                                 |   7%\n  |                                                                            \n  |======                                                                |   8%\n  |                                                                            \n  |=======                                                               |  10%\n  |                                                                            \n  |========                                                              |  11%\n  |                                                                            \n  |=========                                                             |  13%\n  |                                                                            \n  |============                                                          |  17%\n  |                                                                            \n  |==============                                                        |  19%\n  |                                                                            \n  |==============                                                        |  20%\n  |                                                                            \n  |===============                                                       |  22%\n  |                                                                            \n  |===================                                                   |  27%\n  |                                                                            \n  |=====================                                                 |  30%\n  |                                                                            \n  |======================                                                |  31%\n  |                                                                            \n  |=======================                                               |  33%\n  |                                                                            \n  |=========================                                             |  36%\n  |                                                                            \n  |==========================                                            |  37%\n  |                                                                            \n  |============================                                          |  40%\n  |                                                                            \n  |=============================                                         |  42%\n  |                                                                            \n  |==============================                                        |  43%\n  |                                                                            \n  |================================                                      |  46%\n  |                                                                            \n  |==================================                                    |  49%\n  |                                                                            \n  |====================================                                  |  51%\n  |                                                                            \n  |======================================                                |  54%\n  |                                                                            \n  |========================================                              |  57%\n  |                                                                            \n  |==========================================                            |  59%\n  |                                                                            \n  |===========================================                           |  62%\n  |                                                                            \n  |=============================================                         |  65%\n  |                                                                            \n  |===============================================                       |  68%\n  |                                                                            \n  |======================================================================| 100%\n\n\nNow let’s take a look at what we have, by mapping out the polygons of the Georgia counties using the tmap package.\n\n\nCode\ntm_shape(counties_geo) + \n  tm_polygons()\n\n\n\n\n\nGreat, it looks like we should be good to go. We’ll use the newly created map data in counties_geo along with our election results datasets to complete the parts below.\n7)\nFor the Senate race, we’ll create a choropleth (shaded) map of Georgia counties that shows where the Republican candidate for Senate did better vs. worse than Trump.\n\n\nCode\nnew_senate_sf = counties_geo %>%\n  left_join(. , senate_results, by=c(\"NAME\"=\"county\"))\n\nmap1 = tm_shape(new_senate_sf) + \n  tm_fill(col=\"pct_r_above_trump\", title = \"Percent difference from Trump\") + \n  tm_layout(main.title = \"Republican senate candidate performance\\ncompared to Trump in GA counties\",\n            main.title.size = 1.3,\n            legend.outside = TRUE,\n            legend.outside.size = 0.5,\n            legend.text.size = 1) + \n  tm_polygons()\n\nmap1\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"pct_r_above_trump\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n8)\nNow we’ll do the same as Part 7, just this time we’ll do it for the race for Governor.\n\n\nCode\nnew_governor_sf = counties_geo %>%\n  left_join(. , governor_results, by=c(\"NAME\"=\"county\"))\n\nmap2 = tm_shape(new_governor_sf) + \n  tm_fill(col=\"pct_r_above_trump\", title = \"Percent difference from Trump\") + \n  tm_layout(main.title = \"Republican governor candidate performance\\ncompared to Trump in GA counties\",\n            main.title.size = 1.3,\n            legend.outside = TRUE,\n            legend.outside.size = 0.5,\n            legend.text.size = 1) + \n  tm_polygons()\n\n\nmap2\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"pct_r_above_trump\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n9)\nFor the Senate race, we’ll create a choropleth map that shows the margins of victory for the Democratic candidate. To do that we’ll need to compare the Democratic candidate’s percentage (pct_d_2022) with the Republican’s (pct_r_2022) to calculate the margin of victory for each county.\n\n\nCode\nmap3 = tm_shape(new_senate_sf) + \n  tm_fill(col=\"d_margin\", title = \"Democratic margin of victory percentages\") + \n  tm_layout(main.title = \"Senate margins of victory for\\nDemocratic candidates in GA counties\",\n            main.title.size = 1.3,\n            legend.outside = TRUE,\n            legend.outside.size = 0.4,\n            legend.text.size = 1) + \n  tm_polygons()\n\nmap3\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"d_margin\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n10)\nNow we’ll do the same as Part 4, only this time for the race for Governor instead.\n\n\nCode\nmap4 = tm_shape(new_governor_sf) + \n  tm_fill(col=\"d_margin\", title = \"Democratic margin of victory percentages\") + \n  tm_layout(main.title = \"Governor margins of victory for\\nDemocratic candidates in GA counties\",\n            main.title.size = 1.3,\n            legend.outside = TRUE,\n            legend.outside.size = 0.5,\n            legend.text.size = 1) + \n  tm_polygons()\n\nmap4\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"d_margin\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n11)\nNow, we’ll determine the biggest differences between what the Republican candidate for Governor received and what the Senate candidate received. Then, we’ll create a choropleth map of Georgia counties that shows those differences.\n(Note that to accomplish this we’ll have to first run a join that merges the two datasets, so that you have both the senate and governor version of the pct_r_2022 column in the same table.)\n\n\nCode\nsen_gov_sf = counties_geo %>%\n  left_join(. , sen_gov_results, by=c(\"NAME\"=\"county\"))\n\nmap5 = tm_shape(sen_gov_sf) + \n  tm_fill(col=\"pct_r_diff\", title = \"Percent difference\") + \n  tm_layout(main.title = \"Percent differences between Republican senate\\nand governor candidates in GA counties\",\n            main.title.size = 1.1,\n            legend.outside = TRUE,\n            legend.outside.size = 0.5,\n            legend.text.size = 1) + \n  tm_polygons()\n\nmap5\n\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them)."
  },
  {
    "objectID": "assignment_chartsmaps_sharma.html",
    "href": "assignment_chartsmaps_sharma.html",
    "title": "R Charts and Maps Assignment",
    "section": "",
    "text": "Introduction\nFor this assignment you’ll be making a few charts and maps using the ggplot2 and tmap packages we discussed in the last class session.\nTo help in your efforts, do feel free to make use of and adapt the materials we went over in class, which are located here.\nThe data used for this assignment includes Georgia election results by county for U.S. Senate and Governor in 2022, President in 2020, and then some of the same socioeconomic factors we’ve looked at other contexts so far during the semester.\n\nLoading the Data\nThe first step is to load in the data, which is stored in the ga_votes.xlsx Excel file that’s included in this repository. As you’ll see if you open the spreadsheet itself, there are two tabs - one contains the senate results, and one contains the governor results.\nWe’ll load them separately into two datasets to be used for the remainder of this assignment.\n\n#import the GA election data for this assignment\n\n#GA senate\nsenate_results <- read_excel(here(\"ga_votes.xlsx\"), sheet = \"senate\")\n\n#GA governor\ngovernor_results <- read_excel(here(\"ga_votes.xlsx\"), sheet = \"governor\")\n\nTwo columns in particular to highlight that we’ll use to examine how the Republican Senate and Governor candidates did compared with former President Trump’s performance in 2020:\n\npct_r_above_trump. This column calculates the difference in percentage points between what the 2022 Republican candidate got (pct_r_2022) and what Trump got two years earlier (pct_r_2020). A negative value means the candidate did worse than Trump, a positive value means they did better.\nis_r_above_trump. This companion columns is a so-called “flag” column, which provides a Yes/No as to whether the Republican candidate did better or worse than Trump. In other words, is the pct_r_above_trump value positive or negative.\n\n\n\n\nCharts\nFor this section use the ggplot2 package to create your charts.\n1)\nFor the Senate race, create a column/bar chart that shows how many counties the Republican candidate did better vs. worse than Trump.\n\nsenate_results = senate_results %>%\n  mutate(\n    is_r_above_trump_new = ifelse(is_r_above_trump==\"Y\", \"Better\", \"Worse\")\n  )\n\nplot1 = ggplot(senate_results, aes(x = is_r_above_trump_new)) + \n  geom_bar(fill = \"#9ebcda\") +\n  xlab(\"Performance\") +\n  ylab(\"Number of counties\") +\n  labs(title = \"Republican senate candidate performance\\ncompared to Trump in GA counties\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot1\n\n\n\n\n2)\nNow do the same as Question 1, just this time do it for the race for Governor.\n\ngovernor_results = governor_results %>%\n  mutate(\n    is_r_above_trump_new = ifelse(is_r_above_trump==\"Y\", \"Better\", \"Worse\")\n  )\n\nplot2 = ggplot(governor_results, aes(x = is_r_above_trump_new)) + \n  geom_bar(fill = \"#9ebcda\") +\n  xlab(\"Performance\") +\n  ylab(\"Number of counties\") +\n  labs(title = \"Republican governor candidate performance\\ncompared to Trump in GA counties\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot2\n\n\n\n\n3)\nFor the Senate race, create a chart that shows the top 10 biggest drops between the Republican candidate and Trump (i.e. the 10 counties with the most substantial negative numbers in pct_r_above_trump). Remember that you can slice off a certain number of rows using the head() function, i.e. head(5), head(20), etc.\nYour chart should be sorted from the biggest drop to the smallest among the top 10 counties.\n\nsenate_drops = senate_results %>%\n  group_by(county) %>%\n  summarize(pct_r_above_trump = pct_r_above_trump) %>%\n  arrange(pct_r_above_trump) %>%\n  head(10)\n\nplot3 = senate_drops %>%\n  arrange(pct_r_above_trump) %>%\n  ggplot(aes(x = reorder(county, desc(pct_r_above_trump)), y = pct_r_above_trump)) + \n  geom_col(fill = \"#9ebcda\") +\n  coord_flip() + \n  xlab(\"Counties\") +\n  ylab(\"Percentage\") +\n  labs(title = \"Highest drops between Republican candidates\\nand Trump in GA counties (Top 10)\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot3\n\n\n\n\n4)\nFor the Senate race, create a chart that shows the top 10 counties highest margins of victory for the Democratic candidate. To do that you’ll need to compare the Democratic candidate’s percentage (pct_d_2022) with the Republican’s (pct_r_2022) to calculate the margin of victory for each county.\n\nsenate_results = senate_results %>%\n  mutate(\n    d_margin = pct_d_2022 - pct_r_2022\n  )\n\ndem_margin_s = senate_results %>%\n  group_by(county) %>%\n  summarize(d_margin = d_margin) %>%\n  arrange(desc(d_margin)) %>%\n  head(10)\n\nplot4 = dem_margin_s %>%\n  arrange(desc(d_margin)) %>%\n  ggplot(aes(x = reorder(county, d_margin), y = d_margin)) + \n  geom_col(fill = \"#9ebcda\") +\n  coord_flip() + \n  xlab(\"Counties\") +\n  ylab(\"Democratic margin of victory percentage\") +\n  labs(title = \"Highest Democratic margins of victory\\nfor senate race in GA counties (Top 10)\",\n       subtitle = \"2022\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot4\n\n\n\n\n5)\nNow do the same as Question 4, only this time for the race for Governor instead.\n\ngovernor_results = governor_results %>%\n  mutate(\n    d_margin = pct_d_2022 - pct_r_2022\n  )\n\ndem_margin_g = governor_results %>%\n  group_by(county) %>%\n  summarize(d_margin = d_margin) %>%\n  arrange(desc(d_margin)) %>%\n  head(10)\n\nplot5 = dem_margin_g %>%\n  arrange(desc(d_margin)) %>%\n  ggplot(aes(x = reorder(county, d_margin), y = d_margin)) + \n  geom_col(fill = \"#9ebcda\") +\n  coord_flip() + \n  xlab(\"Counties\") +\n  ylab(\"Democratic margin of victory percentage\") +\n  labs(title = \"Highest Democratic margins of victory\\nfor governor race in GA counties (Top 10)\",\n       subtitle = \"2022\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot5\n\n\n\n\n6)\nExtra credit: determine the top 10 counties with the biggest differences between what the Republican candidate for Governor received and what the Senate candidate received.\n(Note that to accomplish this you’ll have to first run a join that merges the two datasets, so that you have both the senate and governor version of the pct_r_2022 column in the same table.)\n\n# .x are senate results; .y are governor results\nsen_gov_results = inner_join(senate_results, governor_results, by=c(\"county\"=\"county\"))\n\nsen_gov_results = sen_gov_results %>% \n  mutate(pct_r_diff = pct_r_2022.y - pct_r_2022.x)\n\nr_diff = sen_gov_results %>%\n  group_by(county) %>%\n  summarize(pct_r_diff = pct_r_diff) %>%\n  arrange(desc(pct_r_diff)) %>%\n  head(10)\n\nplot6 = r_diff %>%\n  arrange(desc(pct_r_diff)) %>%\n  ggplot(aes(x = reorder(county, pct_r_diff), y = pct_r_diff)) + \n  geom_col(fill = \"#9ebcda\") +\n  coord_flip() + \n  xlab(\"Counties\") +\n  ylab(\"Percent difference\") +\n  labs(title = \"Pct differences between Republican senate\\nand governor candidates in GA counties (Top 10)\",\n       subtitle = \"2022\") +\n  theme_clean() + \n  theme(plot.title=element_text(size=14))\n\nplot6\n\n\n\n\n\n\nMaps\nFor this section use the tmap package to create your charts.\nTo help start things out for you, we’re going to download a geospatial/map dataset with the county boundaries for Georgia. We’ll use the tigris package to do this.\n\ncounties_geo <- tigris::counties(state = \"GA\", resolution = \"20m\", cb = TRUE)\n\nRetrieving data for the year 2021\n\n\n\n  |                                                                            \n  |                                                                      |   0%\n  |                                                                            \n  |=                                                                     |   1%\n  |                                                                            \n  |=                                                                     |   2%\n  |                                                                            \n  |==                                                                    |   2%\n  |                                                                            \n  |==                                                                    |   3%\n  |                                                                            \n  |====                                                                  |   5%\n  |                                                                            \n  |====                                                                  |   6%\n  |                                                                            \n  |=====                                                                 |   6%\n  |                                                                            \n  |======                                                                |   8%\n  |                                                                            \n  |======                                                                |   9%\n  |                                                                            \n  |=======                                                               |  10%\n  |                                                                            \n  |=======                                                               |  11%\n  |                                                                            \n  |=========                                                             |  13%\n  |                                                                            \n  |==========                                                            |  15%\n  |                                                                            \n  |===========                                                           |  16%\n  |                                                                            \n  |==============                                                        |  19%\n  |                                                                            \n  |==============                                                        |  20%\n  |                                                                            \n  |===============                                                       |  22%\n  |                                                                            \n  |================                                                      |  23%\n  |                                                                            \n  |==================                                                    |  26%\n  |                                                                            \n  |====================                                                  |  29%\n  |                                                                            \n  |=====================                                                 |  30%\n  |                                                                            \n  |=======================                                               |  33%\n  |                                                                            \n  |=========================                                             |  35%\n  |                                                                            \n  |=========================                                             |  36%\n  |                                                                            \n  |===========================                                           |  39%\n  |                                                                            \n  |============================                                          |  40%\n  |                                                                            \n  |=============================                                         |  42%\n  |                                                                            \n  |==============================                                        |  43%\n  |                                                                            \n  |================================                                      |  46%\n  |                                                                            \n  |=================================                                     |  47%\n  |                                                                            \n  |===================================                                   |  49%\n  |                                                                            \n  |===================================                                   |  50%\n  |                                                                            \n  |====================================                                  |  52%\n  |                                                                            \n  |=====================================                                 |  52%\n  |                                                                            \n  |=======================================                               |  56%\n  |                                                                            \n  |=========================================                             |  59%\n  |                                                                            \n  |============================================                          |  62%\n  |                                                                            \n  |=============================================                         |  65%\n  |                                                                            \n  |==============================================                        |  66%\n  |                                                                            \n  |================================================                      |  69%\n  |                                                                            \n  |===================================================                   |  73%\n  |                                                                            \n  |=====================================================                 |  76%\n  |                                                                            \n  |=======================================================               |  79%\n  |                                                                            \n  |========================================================              |  80%\n  |                                                                            \n  |==========================================================            |  82%\n  |                                                                            \n  |===========================================================           |  84%\n  |                                                                            \n  |============================================================          |  85%\n  |                                                                            \n  |============================================================          |  86%\n  |                                                                            \n  |==============================================================        |  89%\n  |                                                                            \n  |=================================================================     |  92%\n  |                                                                            \n  |======================================================================| 100%\n\n\nNow let’s take a look at what we have, by mapping out the polygons of the Georgia counties using the tmap package.\n\ntm_shape(counties_geo) + \n  tm_polygons()\n\n\n\n\nGreat, it looks like we should be good to go. Use the newly created map data in counties_geo along with our election results datasets to complete the questions below.\n7)\nFor the Senate race, create a choropleth (shaded) map of Georgia counties that shows where the Republican candidate for Senate did better vs. worse than Trump.\n\nnew_senate_sf = counties_geo %>%\n  left_join(. , senate_results, by=c(\"NAME\"=\"county\"))\n\nmap1 = tm_shape(new_senate_sf) + \n  tm_fill(col=\"pct_r_above_trump\", title = \"Percent difference from Trump\") + \n  tm_layout(main.title = \"Republican senate candidate performance\\ncompared to Trump in GA counties\",\n            main.title.size = 1.3,\n            legend.outside = TRUE,\n            legend.outside.size = 0.5,\n            legend.text.size = 1) + \n  tm_polygons()\n\nmap1\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"pct_r_above_trump\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n8)\nNow do the same as Question 7, just this time do it for the race for Governor.\n\nnew_governor_sf = counties_geo %>%\n  left_join(. , governor_results, by=c(\"NAME\"=\"county\"))\n\nmap2 = tm_shape(new_governor_sf) + \n  tm_fill(col=\"pct_r_above_trump\", title = \"Percent difference from Trump\") + \n  tm_layout(main.title = \"Republican governor candidate performance\\ncompared to Trump in GA counties\",\n            main.title.size = 1.3,\n            legend.outside = TRUE,\n            legend.outside.size = 0.5,\n            legend.text.size = 1) + \n  tm_polygons()\n\n\nmap2\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"pct_r_above_trump\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n9)\nFor the Senate race, create a choropleth map that shows the margins of victory for the Democratic candidate. To do that you’ll need to compare the Democratic candidate’s percentage (pct_d_2022) with the Republican’s (pct_r_2022) to calculate the margin of victory for each county.\n\nmap3 = tm_shape(new_senate_sf) + \n  tm_fill(col=\"d_margin\", title = \"Democratic margin of victory percentages\") + \n  tm_layout(main.title = \"Senate margins of victory for\\nDemocratic candidates in GA counties\",\n            main.title.size = 1.3,\n            legend.outside = TRUE,\n            legend.outside.size = 0.4,\n            legend.text.size = 1) + \n  tm_polygons()\n\nmap3\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"d_margin\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n10)\nNow do the same as Question 4, only this time for the race for Governor instead.\n\nmap4 = tm_shape(new_governor_sf) + \n  tm_fill(col=\"d_margin\", title = \"Democratic margin of victory percentages\") + \n  tm_layout(main.title = \"Governor margins of victory for\\nDemocratic candidates in GA counties\",\n            main.title.size = 1.3,\n            legend.outside = TRUE,\n            legend.outside.size = 0.5,\n            legend.text.size = 1) + \n  tm_polygons()\n\nmap4\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them).\n\n\nVariable(s) \"d_margin\" contains positive and negative values, so midpoint is set to 0. Set midpoint = NA to show the full spectrum of the color palette.\n\n\n\n\n\n11)\nExtra credit: determine the biggest differences between what the Republican candidate for Governor received and what the Senate candidate received. Then create a choropleth map of Georgia counties that shows those differences.\n(Note that to accomplish this you’ll have to first run a join that merges the two datasets, so that you have both the senate and governor version of the pct_r_2022 column in the same table.)\n\nsen_gov_sf = counties_geo %>%\n  left_join(. , sen_gov_results, by=c(\"NAME\"=\"county\"))\n\nmap5 = tm_shape(sen_gov_sf) + \n  tm_fill(col=\"pct_r_diff\", title = \"Percent difference\") + \n  tm_layout(main.title = \"Percent differences between Republican senate\\nand governor candidates in GA counties\",\n            main.title.size = 1.1,\n            legend.outside = TRUE,\n            legend.outside.size = 0.5,\n            legend.text.size = 1) + \n  tm_polygons()\n\nmap5\n\nWarning: One tm layer group has duplicated layer types, which are omitted. To\ndraw multiple layers of the same type, use multiple layer groups (i.e. specify\ntm_shape prior to each of them)."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Riya Sharma",
    "section": "",
    "text": "Hello! My name is Riya Sharma, and I am currently a student at The George Washington University pursuing a double major in Political Science and Data Science with a minor in Journalism and Mass Communication. I am interested in the intersection between data science and politics, especially in regards to policy analysis and both domestic and international policymaking regarding Indigenous peoples, women and girls, and their rights.\nIn my free time, I enjoy biking, learning languages, and exploring D.C!"
  },
  {
    "objectID": "index.html#education",
    "href": "index.html#education",
    "title": "Riya Sharma",
    "section": "Education",
    "text": "Education\nThe George Washington University:\nCandidate for BS in Data Science and Political Science (Public Policy Focus), minor in Journalism and Mass Communications"
  },
  {
    "objectID": "index.html#skills",
    "href": "index.html#skills",
    "title": "Riya Sharma",
    "section": "Skills",
    "text": "Skills\nData Analysis\nResearch\nVerbal and Written Communication\nReporting and News Writing"
  },
  {
    "objectID": "portfolio.html",
    "href": "portfolio.html",
    "title": "Portfolio",
    "section": "",
    "text": "As an intern for the Borgen Project, an organization dedicated to ending global poverty, I wrote articles for both Borgen Magazine and the Borgen Project’s blog on global issues and efforts being made to eradicate poverty in various countries.\n\nThe Impact of COVID-19 on Poverty in Mongolia\nHow Children of Vietnam Helps Fight Poverty\nHouse Resolution Hopes to Fight COVID-19 and Poverty in Africa\nThe RENACER Act is Supporting Human Rights in Nicaragua\nHow Organizations are Fighting the Education Crisis in Yemen\nHow Sen. Cory Booker is Supporting Women in Developing Countries\n4 Organizations Helping Women in Asia\nThe Impact of COVID-19 on Poverty in Afghanistan"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "More Stuff About Me",
    "section": "",
    "text": "About this site\nHere is some new stuff!\n\n1 + 1 \n\n[1] 2"
  }
]